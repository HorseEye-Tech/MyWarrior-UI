<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crisis History</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script> window.FontAwesomeConfig = { autoReplaceSvg: 'nest'};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        ::-webkit-scrollbar { display: none;}
        body { animation: pageEnter 0.3s ease-out; }
        @keyframes pageEnter { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563EB',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#DC2626',
                        neutral: {
                            50: '#FFFFFF',
                            100: '#F9FAFB',
                            200: '#E5E7EB',
                            700: '#6B7280',
                            900: '#111827'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif']
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-neutral-100 font-sans antialiased">
    <div id="crisis-history-screen" class="w-full min-h-[840px] flex flex-col">
        
        <header id="header" class="bg-white border-b border-neutral-200 px-5 py-4 sticky top-0 z-50">
            <div class="flex items-center justify-between">
                <button id="back-btn" onclick="window.location.href='crisis-plan.html'" class="w-10 h-10 flex items-center justify-center rounded-lg active:bg-neutral-100 transition-colors duration-200">
                    <i class="fa-solid fa-arrow-left text-neutral-900 text-lg"></i>
                </button>
                <h1 class="text-lg font-bold text-neutral-900">Crisis History</h1>
                <button id="export-btn" class="w-10 h-10 flex items-center justify-center rounded-lg active:bg-neutral-100 transition-colors duration-200">
                    <i class="fa-solid fa-share-from-square text-neutral-700 text-lg"></i>
                </button>
            </div>
        </header>

        <main id="main-content" class="flex-1 overflow-y-auto pb-24">
            
            <div id="view-toggle-section" class="px-5 pt-5 pb-4">
                <div class="bg-neutral-200 rounded-xl p-1 flex gap-1">
                    <button id="list-view-btn" class="flex-1 h-[44px] bg-white text-neutral-900 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 shadow-sm transition-all duration-200">
                        <i class="fa-solid fa-list text-base"></i>
                        List View
                    </button>
                    <button id="calendar-view-btn" class="flex-1 h-[44px] bg-transparent text-neutral-700 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-all duration-200">
                        <i class="fa-solid fa-calendar text-base"></i>
                        Calendar
                    </button>
                </div>
            </div>

            <div id="stats-summary-section" class="px-5 mb-5">
                <div class="bg-white rounded-2xl p-5 border border-neutral-200">
                    <h2 class="text-base font-bold text-neutral-900 mb-4">Last 30 Days</h2>
                    <div class="grid grid-cols-3 gap-4">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-neutral-900 mb-1">8</div>
                            <div class="text-xs text-neutral-700">Total Episodes</div>
                        </div>
                        <div class="text-center border-l border-r border-neutral-200">
                            <div class="text-2xl font-bold text-danger mb-1">3</div>
                            <div class="text-xs text-neutral-700">Severe</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-primary mb-1">4.2h</div>
                            <div class="text-xs text-neutral-700">Avg Duration</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="filter-section" class="px-5 mb-4">
                <div class="flex gap-2 overflow-x-auto pb-2">
                    <button class="filter-chip px-4 h-[36px] bg-primary text-white text-xs font-semibold rounded-full whitespace-nowrap flex-shrink-0 active:scale-95 transition-transform duration-200">
                        All Episodes
                    </button>
                    <button class="filter-chip px-4 h-[36px] bg-white border border-neutral-200 text-neutral-700 text-xs font-semibold rounded-full whitespace-nowrap flex-shrink-0 active:scale-95 transition-transform duration-200">
                        Severe Only
                    </button>
                    <button class="filter-chip px-4 h-[36px] bg-white border border-neutral-200 text-neutral-700 text-xs font-semibold rounded-full whitespace-nowrap flex-shrink-0 active:scale-95 transition-transform duration-200">
                        This Month
                    </button>
                    <button class="filter-chip px-4 h-[36px] bg-white border border-neutral-200 text-neutral-700 text-xs font-semibold rounded-full whitespace-nowrap flex-shrink-0 active:scale-95 transition-transform duration-200">
                        Last 3 Months
                    </button>
                </div>
            </div>

            <div id="crisis-list-container" class="px-5 space-y-3 mb-6">
                
                <div id="crisis-card-1" class="crisis-card bg-white rounded-2xl p-5 border-l-4 border-danger active:scale-[0.98] transition-transform duration-200">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs font-bold text-danger bg-danger/10 px-2 py-1 rounded">Severe Crisis</span>
                                <span class="text-xs text-neutral-700">Pain 9/10</span>
                            </div>
                            <div class="flex items-center gap-2 text-xs text-neutral-700">
                                <i class="fa-solid fa-calendar text-neutral-700"></i>
                                <span>Dec 15, 2024 • 10:45 AM</span>
                            </div>
                        </div>
                        <button class="w-8 h-8 flex items-center justify-center rounded-lg active:bg-neutral-100 transition-colors duration-200">
                            <i class="fa-solid fa-chevron-right text-neutral-700 text-sm"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-2 pt-3 border-t border-neutral-200">
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-clock text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Duration:</span>
                            <span class="text-neutral-700">6 hours 30 minutes</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-pills text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Actions:</span>
                            <span class="text-neutral-700">Medication, Heat therapy</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-heart-pulse text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Outcome:</span>
                            <span class="text-success font-medium">Recovered at home</span>
                        </div>
                    </div>
                </div>

                <div id="crisis-card-2" class="crisis-card bg-white rounded-2xl p-5 border-l-4 border-warning active:scale-[0.98] transition-transform duration-200">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs font-bold text-warning bg-warning/10 px-2 py-1 rounded">Moderate Pain</span>
                                <span class="text-xs text-neutral-700">Pain 5/10</span>
                            </div>
                            <div class="flex items-center gap-2 text-xs text-neutral-700">
                                <i class="fa-solid fa-calendar text-neutral-700"></i>
                                <span>Dec 12, 2024 • 2:15 PM</span>
                            </div>
                        </div>
                        <button class="w-8 h-8 flex items-center justify-center rounded-lg active:bg-neutral-100 transition-colors duration-200">
                            <i class="fa-solid fa-chevron-right text-neutral-700 text-sm"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-2 pt-3 border-t border-neutral-200">
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-clock text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Duration:</span>
                            <span class="text-neutral-700">3 hours 15 minutes</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-pills text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Actions:</span>
                            <span class="text-neutral-700">Rest, Hydration</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-heart-pulse text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Outcome:</span>
                            <span class="text-success font-medium">Recovered at home</span>
                        </div>
                    </div>
                </div>

                <div id="crisis-card-3" class="crisis-card bg-white rounded-2xl p-5 border-l-4 border-danger active:scale-[0.98] transition-transform duration-200">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs font-bold text-danger bg-danger/10 px-2 py-1 rounded">Severe Crisis</span>
                                <span class="text-xs text-neutral-700">Pain 8/10</span>
                            </div>
                            <div class="flex items-center gap-2 text-xs text-neutral-700">
                                <i class="fa-solid fa-calendar text-neutral-700"></i>
                                <span>Dec 8, 2024 • 11:30 PM</span>
                            </div>
                        </div>
                        <button class="w-8 h-8 flex items-center justify-center rounded-lg active:bg-neutral-100 transition-colors duration-200">
                            <i class="fa-solid fa-chevron-right text-neutral-700 text-sm"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-2 pt-3 border-t border-neutral-200">
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-clock text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Duration:</span>
                            <span class="text-neutral-700">8 hours 45 minutes</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-pills text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Actions:</span>
                            <span class="text-neutral-700">ER visit, IV fluids</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-heart-pulse text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Outcome:</span>
                            <span class="text-warning font-medium">Hospital admission</span>
                        </div>
                    </div>
                </div>

                <div id="crisis-card-4" class="crisis-card bg-white rounded-2xl p-5 border-l-4 border-success active:scale-[0.98] transition-transform duration-200">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs font-bold text-success bg-success/10 px-2 py-1 rounded">Mild Discomfort</span>
                                <span class="text-xs text-neutral-700">Pain 3/10</span>
                            </div>
                            <div class="flex items-center gap-2 text-xs text-neutral-700">
                                <i class="fa-solid fa-calendar text-neutral-700"></i>
                                <span>Dec 5, 2024 • 8:00 AM</span>
                            </div>
                        </div>
                        <button class="w-8 h-8 flex items-center justify-center rounded-lg active:bg-neutral-100 transition-colors duration-200">
                            <i class="fa-solid fa-chevron-right text-neutral-700 text-sm"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-2 pt-3 border-t border-neutral-200">
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-clock text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Duration:</span>
                            <span class="text-neutral-700">1 hour 20 minutes</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-pills text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Actions:</span>
                            <span class="text-neutral-700">Rest, Warm compress</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-heart-pulse text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Outcome:</span>
                            <span class="text-success font-medium">Recovered quickly</span>
                        </div>
                    </div>
                </div>

                <div id="crisis-card-5" class="crisis-card bg-white rounded-2xl p-5 border-l-4 border-warning active:scale-[0.98] transition-transform duration-200">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs font-bold text-warning bg-warning/10 px-2 py-1 rounded">Moderate Pain</span>
                                <span class="text-xs text-neutral-700">Pain 6/10</span>
                            </div>
                            <div class="flex items-center gap-2 text-xs text-neutral-700">
                                <i class="fa-solid fa-calendar text-neutral-700"></i>
                                <span>Dec 1, 2024 • 4:45 PM</span>
                            </div>
                        </div>
                        <button class="w-8 h-8 flex items-center justify-center rounded-lg active:bg-neutral-100 transition-colors duration-200">
                            <i class="fa-solid fa-chevron-right text-neutral-700 text-sm"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-2 pt-3 border-t border-neutral-200">
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-clock text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Duration:</span>
                            <span class="text-neutral-700">4 hours 10 minutes</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-pills text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Actions:</span>
                            <span class="text-neutral-700">Medication, Rest</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-heart-pulse text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Outcome:</span>
                            <span class="text-success font-medium">Recovered at home</span>
                        </div>
                    </div>
                </div>

                <div id="crisis-card-6" class="crisis-card bg-white rounded-2xl p-5 border-l-4 border-danger active:scale-[0.98] transition-transform duration-200">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs font-bold text-danger bg-danger/10 px-2 py-1 rounded">Severe Crisis</span>
                                <span class="text-xs text-neutral-700">Pain 10/10</span>
                            </div>
                            <div class="flex items-center gap-2 text-xs text-neutral-700">
                                <i class="fa-solid fa-calendar text-neutral-700"></i>
                                <span>Nov 28, 2024 • 1:20 AM</span>
                            </div>
                        </div>
                        <button class="w-8 h-8 flex items-center justify-center rounded-lg active:bg-neutral-100 transition-colors duration-200">
                            <i class="fa-solid fa-chevron-right text-neutral-700 text-sm"></i>
                        </button>
                    </div>
                    
                    <div class="space-y-2 pt-3 border-t border-neutral-200">
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-clock text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Duration:</span>
                            <span class="text-neutral-700">12 hours 30 minutes</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-pills text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Actions:</span>
                            <span class="text-neutral-700">ER visit, Pain management</span>
                        </div>
                        <div class="flex items-center gap-2 text-xs">
                            <i class="fa-solid fa-heart-pulse text-neutral-700 w-4"></i>
                            <span class="text-neutral-900 font-medium">Outcome:</span>
                            <span class="text-warning font-medium">Hospital admission</span>
                        </div>
                    </div>
                </div>

            </div>

            <div id="export-section" class="px-5 mb-6">
                <button id="export-report-btn" class="w-full h-[52px] bg-primary text-white text-base font-semibold rounded-xl flex items-center justify-center gap-3 active:scale-[0.98] transition-all duration-200 shadow-lg">
                    <i class="fa-solid fa-file-pdf text-xl"></i>
                    Export Full Report
                </button>
                <p class="text-xs text-neutral-700 text-center mt-3">Generate a PDF report to share with your healthcare provider</p>
            </div>

        </main>

        <nav id="bottom-navigation" class="fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 px-5 py-3 z-50">
            <div class="flex items-center justify-around">
                <button onclick="window.location.href='dashboard.html'" class="nav-item flex flex-col items-center gap-1 active:scale-95 transition-transform duration-200">
                    <i class="fa-solid fa-house text-neutral-700 text-xl"></i>
                    <span class="text-xs font-medium text-neutral-700">Home</span>
                </button>
                <button onclick="window.location.href='health-log.html'" class="nav-item flex flex-col items-center gap-1 active:scale-95 transition-transform duration-200">
                    <i class="fa-solid fa-chart-line text-neutral-700 text-xl"></i>
                    <span class="text-xs font-medium text-neutral-700">Health Log</span>
                </button>
                <button onclick="window.location.href='community.html'" class="nav-item flex flex-col items-center gap-1 active:scale-95 transition-transform duration-200">
                    <i class="fa-solid fa-users text-neutral-700 text-xl"></i>
                    <span class="text-xs font-medium text-neutral-700">Community</span>
                </button>
                <button onclick="window.location.href='profile.html'" class="nav-item flex flex-col items-center gap-1 active:scale-95 transition-transform duration-200">
                    <i class="fa-solid fa-user text-neutral-700 text-xl"></i>
                    <span class="text-xs font-medium text-neutral-700">Profile</span>
                </button>
            </div>
        </nav>

    </div>

    <script>
        window.addEventListener('load', function() {
            const listViewBtn = document.getElementById('list-view-btn');
            const calendarViewBtn = document.getElementById('calendar-view-btn');
            const exportReportBtn = document.getElementById('export-report-btn');
            const crisisCards = document.querySelectorAll('.crisis-card');
            const filterChips = document.querySelectorAll('.filter-chip');

            listViewBtn.addEventListener('click', function() {
                listViewBtn.classList.add('bg-white', 'text-neutral-900', 'shadow-sm');
                listViewBtn.classList.remove('bg-transparent', 'text-neutral-700');
                calendarViewBtn.classList.remove('bg-white', 'text-neutral-900', 'shadow-sm');
                calendarViewBtn.classList.add('bg-transparent', 'text-neutral-700');
            });

            calendarViewBtn.addEventListener('click', function() {
                calendarViewBtn.classList.add('bg-white', 'text-neutral-900', 'shadow-sm');
                calendarViewBtn.classList.remove('bg-transparent', 'text-neutral-700');
                listViewBtn.classList.remove('bg-white', 'text-neutral-900', 'shadow-sm');
                listViewBtn.classList.add('bg-transparent', 'text-neutral-700');
            });

            filterChips.forEach(chip => {
                chip.addEventListener('click', function() {
                    filterChips.forEach(c => {
                        c.classList.remove('bg-primary', 'text-white');
                        c.classList.add('bg-white', 'border', 'border-neutral-200', 'text-neutral-700');
                    });
                    this.classList.add('bg-primary', 'text-white');
                    this.classList.remove('bg-white', 'border', 'border-neutral-200', 'text-neutral-700');
                });
            });

            crisisCards.forEach(card => {
                card.addEventListener('click', function() {
                    this.style.transform = 'scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                });
            });

            exportReportBtn.addEventListener('click', function() {
                this.style.transform = 'scale(0.98)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 150);
            });
        });
    </script>
</body>
</html>